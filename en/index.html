
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="title">かんたんPDFツール Neo</title>
  <meta name="description" content="100%ブラウザ内で動く次世代PDFツール。結合/分割/編集/圧縮/画像⇄PDF/OCR/フォーム/手書き/暗号学的シール/PWA/EXIF。" />
  <meta property="og:type" content="website">
  <meta property="og:title" content="Simple PDF Tools Neo">
  <meta property="og:description" content="OOP・PWA・EXIF・ES256 QR Seal・完全クライアントサイド。">
  <meta property="og:image" content="/og.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="theme-color" content="#0ea5e9">
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/icons/icon-192.png">
  <link rel="stylesheet" href="/assets/app.css">
  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@4.6.82/build/pdf.min.js"></script>
  <script>pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdn.jsdelivr.net/npm/pdfjs-dist@4.6.82/build/pdf.worker.min.js";</script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/exifr@7.1.3/dist/full.umd.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
</head>
<body>
  <div id="langbar" class="langbar">
    <span data-i18n="lang_suggest">English is available.</span>
    <a href="/en/" style="margin-left:10px;text-decoration:underline">Open English</a>
    <a href="/es/" style="margin-left:10px;text-decoration:underline">Abrir Español</a>
    <button id="langbarClose" class="btn" style="margin-left:auto;padding:6px 10px">×</button>
  </div>
  <header>
    <h1 data-i18n="headline">かんたんPDFツール Neo <span class="pill">100%ブラウザ内処理</span> <span class="pill">無料</span></h1>
    <p data-i18n="sub">結合・分割・編集・圧縮・画像⇄PDF・OCR・フォーム・手書きサイン・暗号学的シール（実験）をローカルで完結。PWA / EXIF自動回転 / 多言語。</p>
  </header>

  <div class="wrap">
    <div class="ad"></div>
    <div class="grid">
      <section class="card"><h2 data-i18n="merge_h">PDFを結合</h2><div class="body">
        <label data-i18n="merge_label">PDFを選択</label><input id="mergeFiles" type="file" accept="application/pdf" multiple />
        <div class="row" style="margin-top:10px"><button class="btn" id="mergeBtn" data-i18n="btn_create">作成</button><button class="btn" id="clearMerge" data-i18n="btn_clear">クリア</button></div>
      </div></section>

      <section class="card"><h2 data-i18n="split_h">PDFを分割</h2><div class="body">
        <label>PDF</label><input id="splitFile" type="file" accept="application/pdf" />
        <label data-i18n="ranges">ページ範囲（例: 1-3,5,8-）</label><input id="splitRanges" type="text" placeholder="1-3,5,8-" />
        <div class="row" style="margin-top:10px"><button class="btn" id="splitBtn" data-i18n="btn_export">書き出し</button><button class="btn" id="clearSplit" data-i18n="btn_clear">クリア</button></div>
      </div></section>

      <section class="card"><h2 data-i18n="compress_h">画像主体PDFの軽量化</h2><div class="body">
        <label>PDF</label><input id="compressFile" type="file" accept="application/pdf" />
        <div class="row" style="margin-top:8px">
          <div><label data-i18n="jpeg_q">JPEG品質 0.3–0.95</label><input id="quality" type="range" min="0.3" max="0.95" step="0.05" value="0.7"/><div class="note">q: <span id="qVal">0.70</span></div></div>
          <div><label data-i18n="scale">スケール 0.5–1.0</label><input id="scale" type="range" min="0.5" max="1" step="0.05" value="0.8"/><div class="note">s: <span id="sVal">0.80</span></div></div>
        </div>
        <div class="row" style="margin-top:10px"><button class="btn" id="compressBtn" data-i18n="btn_export">書き出し</button><button class="btn" id="clearCompress" data-i18n="btn_clear">クリア</button></div>
      </div></section>

      <section class="card"><h2 data-i18n="imgpdf_h">画像 → PDF（EXIF自動回転）</h2><div class="body">
        <label data-i18n="images">画像</label><input id="imgFiles" type="file" accept="image/*" multiple />
        <div class="row" style="margin-top:8px">
          <div><label data-i18n="page_size">用紙サイズ</label><select id="pageSize"><option value="fit" data-i18n="fit">元画像</option><option value="a4p">A4 縦</option><option value="a4l">A4 横</option></select></div>
          <div><label data-i18n="margins">余白（mm）</label><input id="marginMm" type="number" min="0" max="50" step="1" value="10" /></div>
        </div>
        <div class="row" style="margin-top:10px"><button class="btn" id="img2pdfBtn" data-i18n="btn_create">作成</button><button class="btn" id="clearImg" data-i18n="btn_clear">クリア</button></div>
      </div></section>

      <section class="card"><h2 data-i18n="editor_h">ページ編集（並べ替え/削除/回転）</h2><div class="body">
        <label>PDF</label><input id="editFile" type="file" accept="application/pdf" />
        <div id="thumbs" class="thumbs"></div>
        <div class="row" style="margin-top:10px"><button class="btn" id="applyEditBtn" data-i18n="btn_apply">適用して保存</button><button class="btn" id="clearEdit" data-i18n="btn_clear">クリア</button></div>
      </div></section>

      <section class="card"><h2 data-i18n="wm_h">ウォーターマーク & メタデータ</h2><div class="body">
        <label>PDF</label><input id="wmFile" type="file" accept="application/pdf" />
        <div class="row" style="margin-top:8px">
          <div><label data-i18n="wm_text">テキストWM</label><input id="wmText" type="text" placeholder="© YourSite"></div>
          <div><label data-i18n="opacity">透過度</label><input id="wmAlpha" type="number" min="0.05" max="0.5" step="0.01" value="0.12"></div>
        </div>
        <div class="row" style="margin-top:8px">
          <div><label data-i18n="wm_img">画像WM</label><input id="wmImage" type="file" accept="image/png,image/jpeg"></div>
          <div><label data-i18n="wm_scale">サイズ倍率</label><input id="wmScale" type="number" min="0.2" max="1" step="0.1" value="0.6"></div>
        </div>
        <div class="row" style="margin-top:8px">
          <div><label data-i18n="title">タイトル</label><input id="metaTitle" type="text"></div>
          <div><label data-i18n="author">作成者</label><input id="metaAuthor" type="text"></div>
        </div>
        <div class="row" style="margin-top:10px"><button class="btn" id="applyWmBtn" data-i18n="btn_apply">適用して保存</button><button class="btn" id="clearWm" data-i18n="btn_clear">クリア</button></div>
      </div></section>

      <section class="card"><h2 data-i18n="p2i_h">PDF → 画像（ZIP）</h2><div class="body">
        <label>PDF</label><input id="p2iFile" type="file" accept="application/pdf" />
        <div class="row" style="margin-top:8px">
          <div><label data-i18n="ranges">ページ範囲</label><input id="p2iRanges" type="text" placeholder="1-3,5"></div>
          <div><label data-i18n="type">形式</label><select id="p2iType"><option value="image/png">PNG</option><option value="image/jpeg">JPEG</option></select></div>
          <div><label data-i18n="scale">スケール</label><input id="p2iScale" type="number" min="1" max="3" step="0.5" value="2"></div>
        </div>
        <div class="row" style="margin-top:10px"><button class="btn" id="p2iBtn" data-i18n="btn_export">書き出し</button><button class="btn" id="clearP2i" data-i18n="btn_clear">クリア</button></div>
      </div></section>

      <section class="card"><h2>OCR</h2><div class="body">
        <label>PDF</label><input id="ocrFile" type="file" accept="application/pdf" />
        <div class="row" style="margin-top:8px">
          <div><label data-i18n="language">言語</label><select id="ocrLang"><option value="jpn">日本語</option><option value="eng">English</option></select></div>
          <div><label data-i18n="pages">処理ページ数</label><input id="ocrPages" type="number" min="1" step="1" value="3"></div>
        </div>
        <div class="row" style="margin-top:10px"><button class="btn" id="ocrBtn" data-i18n="btn_run">実行</button><button class="btn" id="clearOcr" data-i18n="btn_clear">クリア</button></div>
      </div></section>

      <section class="card"><h2 data-i18n="form_h">フォーム入力 & フラット化</h2><div class="body">
        <label>PDF</label><input id="formFile" type="file" accept="application/pdf" />
        <div class="row" style="margin-top:8px"><button class="btn" id="formScan" data-i18n="scan">項目をスキャン</button><button class="btn" id="formApply" data-i18n="btn_apply">適用して保存</button></div>
        <div style="margin-top:8px;overflow:auto"><table class="fields" id="formTable" style="display:none"><thead><tr><th>Field</th><th>Value</th></tr></thead><tbody></tbody></table></div>
      </div></section>

      <section class="card"><h2 data-i18n="hand_h">手書きサイン</h2><div class="body">
        <label>PDF</label><input id="sigPdf" type="file" accept="application/pdf" />
        <label data-i18n="draw" style="margin-top:8px">キャンバスに描く</label>
        <canvas id="sigpad" width="360" height="140" style="background:#0d1430;border:1px solid #2a366b;border-radius:8px"></canvas>
        <div class="row" style="margin-top:8px">
          <div><label data-i18n="page">ページ</label><input id="sigPage" type="number" min="1" value="1"></div>
          <div><label data-i18n="position">位置</label><select id="sigPos"><option value="rb">RB</option><option value="lb">LB</option><option value="rt">RT</option><option value="lt">LT</option><option value="center">Center</option></select></div>
          <div><label data-i18n="width">幅(pt)</label><input id="sigWidth" type="number" min="60" step="10" value="180"></div>
          <div><label data-i18n="opacity">透過度</label><input id="sigAlpha" type="number" min="0.2" max="1" step="0.05" value="0.98"></div>
        </div>
        <div class="row" style="margin-top:10px"><button class="btn" id="sigClear" data-i18n="btn_clear">クリア</button><button class="btn" id="sigApply" data-i18n="btn_apply">適用して保存</button></div>
      </div></section>

      <section class="card"><h2 data-i18n="outline_h">しおり分割 → ZIP</h2><div class="body">
        <label>PDF</label><input id="olFile" type="file" accept="application/pdf" />
        <div class="row" style="margin-top:10px"><button class="btn" id="olSplit" data-i18n="btn_run">実行</button></div>
      </div></section>

      <section class="card"><h2 data-i18n="kw_h">キーワード抽出</h2><div class="body">
        <label>PDF</label><input id="kwFile" type="file" accept="application/pdf" />
        <div class="row" style="margin-top:8px"><div><label data-i18n="keyword">キーワード</label><input id="kw" type="text" placeholder="invoice"></div><div><label data-i18n="case">大小区別</label><select id="kwCase"><option value="ins">No</option><option value="sens">Yes</option></select></div></div>
        <div class="row" style="margin-top:10px"><button class="btn" id="kwExtract" data-i18n="btn_run">実行</button></div>
      </div></section>

      <section class="card"><h2 data-i18n="text_h">埋め込みテキスト → TXT</h2><div class="body">
        <label>PDF</label><input id="txtFile" type="file" accept="application/pdf" />
        <div class="row" style="margin-top:10px"><button class="btn" id="txtExport" data-i18n="btn_export">書き出し</button></div>
      </div></section>

      <section class="card"><h2 data-i18n="seal_h">暗号学的シール（ES256 QR・実験）</h2><div class="body">
        <label>PDF</label><input id="sealPdf" type="file" accept="application/pdf" />
        <div class="row" style="margin-top:8px"><div><label data-i18n="place">ページ</label><input id="sealPage" type="number" min="1" value="1"></div><div><label data-i18n="qr_size">QRサイズ</label><input id="sealSize" type="number" min="96" step="16" value="160"></div></div>
        <div class="row" style="margin-top:10px"><button class="btn" id="sealCreate" data-i18n="btn_create">作成</button><button class="btn" id="sealScan" data-i18n="scan_qr">QR読み取り</button></div>
        <p class="note" data-i18n="seal_note">これはPAdES互換の「電子署名」ではなく、ブラウザで検証できる暗号学的シールです。<a href="/verify.html">verify.html</a> でも検証可能。</p>
      </div></section>

      <section class="card"><h2>Log</h2><div class="body"><div id="log" class="log">Ready.</div></div></section>
    </div>
    <div class="ad"></div>
    <div class="footer"><span class="note">© 2025 Simple PDF Tools Neo</span></div>
  </div>

  <div id="toast" class="toast"></div>

  <script src="/assets/app.js"></script>
</body>
</html>
